{"ast":null,"code":"import _toConsumableArray from\"/Users/fabiotavarez/Desktop/Dream-Team-frontend/dream-team/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/fabiotavarez/Desktop/Dream-Team-frontend/dream-team/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/fabiotavarez/Desktop/Dream-Team-frontend/dream-team/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/fabiotavarez/Desktop/Dream-Team-frontend/dream-team/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import Comment from\"./Comment\";import\"./Comments.css\";import CommentForm from\"./CommentForm\";import{getTeamCommentAPI,createTeamCommentAPI,updateTeamCommentAPI,deleteTeamCommentAPI}from\"../Api/API\";import{CommentsContext}from\"../Context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API=process.env.REACT_APP_API_URL;function Comments(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),viewEditToggleForm=_useState4[0],setViewEditToggleForm=_useState4[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){fetchTeamComment();},[id,API]);function fetchTeamComment(){return _fetchTeamComment.apply(this,arguments);}function _fetchTeamComment(){_fetchTeamComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getTeamCommentAPI(id);case 3:result=_context.sent;setComments(result.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _fetchTeamComment.apply(this,arguments);}function handleAdd(_x){return _handleAdd.apply(this,arguments);}function _handleAdd(){_handleAdd=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newComment){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return createTeamCommentAPI(id,newComment);case 3:result=_context2.sent;setComments([result.data].concat(_toConsumableArray(comments)));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return _handleAdd.apply(this,arguments);}function handleEdit(_x2){return _handleEdit.apply(this,arguments);}function _handleEdit(){_handleEdit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(updatedComment){var result,copyCommentArray,indexUpdatedComment;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:console.log(\"Handle Edit\",updatedComment);_context3.prev=1;_context3.next=4;return updateTeamCommentAPI(id,updatedComment.id,updatedComment);case 4:result=_context3.sent;copyCommentArray=_toConsumableArray(comments);indexUpdatedComment=copyCommentArray.findIndex(function(comment){return comment.id===updatedComment.id;});copyCommentArray[indexUpdatedComment]=result.data;setComments(copyCommentArray);setViewEditToggleForm(!viewEditToggleForm);_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);alert(\"sorry, we cannot update, please contact support\");console.log(_context3.t0);case 16:case\"end\":return _context3.stop();}},_callee3,null,[[1,12]]);}));return _handleEdit.apply(this,arguments);}function handleDelete(_x3){return _handleDelete.apply(this,arguments);}function _handleDelete(){_handleDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){var filteredCommentArray;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return deleteTeamCommentAPI(id);case 3:filteredCommentArray=comments.filter(function(item){return item.id!==id;});setComments(filteredCommentArray);_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 10:case\"end\":return _context4.stop();}},_callee4,null,[[0,7]]);}));return _handleDelete.apply(this,arguments);}return/*#__PURE__*/_jsx(\"section\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" comments-container\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"comment-heading\",children:\"Add a New Comment\"}),/*#__PURE__*/_jsx(CommentForm,{fromParentCommentsHandleSubmit:handleAdd}),/*#__PURE__*/_jsx(\"h5\",{className:\"comment-heading-comment\",children:\"Comments\"}),comments.length>0&&comments.map(function(item){return/*#__PURE__*/_jsx(CommentsContext.Provider,{value:{fromParentCommentsHandleSubmit:handleEdit,comment:item,handleDelete:handleDelete,viewEditToggleForm:viewEditToggleForm,setViewEditToggleForm:setViewEditToggleForm},children:/*#__PURE__*/_jsx(Comment,{})},item.id);})]})});}export default Comments;","map":{"version":3,"names":["React","useState","useEffect","useParams","Comment","CommentForm","getTeamCommentAPI","createTeamCommentAPI","updateTeamCommentAPI","deleteTeamCommentAPI","CommentsContext","jsx","_jsx","jsxs","_jsxs","API","process","env","REACT_APP_API_URL","Comments","_useState","_useState2","_slicedToArray","comments","setComments","_useState3","_useState4","viewEditToggleForm","setViewEditToggleForm","_useParams","id","fetchTeamComment","_fetchTeamComment","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","sent","data","t0","console","log","stop","handleAdd","_x","_handleAdd","_callee2","newComment","_callee2$","_context2","concat","_toConsumableArray","handleEdit","_x2","_handleEdit","_callee3","updatedComment","copyCommentArray","indexUpdatedComment","_callee3$","_context3","findIndex","comment","alert","handleDelete","_x3","_handleDelete","_callee4","filteredCommentArray","_callee4$","_context4","filter","item","className","children","fromParentCommentsHandleSubmit","length","map","Provider","value"],"sources":["/Users/fabiotavarez/Desktop/Dream-Team-frontend/dream-team/src/components/Comments/Comments.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Comment from \"./Comment\";\nimport \"./Comments.css\";\n\nimport CommentForm from \"./CommentForm\";\n\nimport {\n  getTeamCommentAPI,\n  createTeamCommentAPI,\n  updateTeamCommentAPI,\n  deleteTeamCommentAPI,\n} from \"../Api/API\";\n\nimport { CommentsContext } from \"../Context/Context\";\n\nconst API = process.env.REACT_APP_API_URL;\n\nfunction Comments() {\n  const [comments, setComments] = useState([]);\n\n  const [viewEditToggleForm, setViewEditToggleForm] = useState(false);\n\n  let { id } = useParams();\n\n  useEffect(() => {\n    fetchTeamComment();\n  }, [id, API]);\n\n  async function fetchTeamComment() {\n    try {\n      let result = await getTeamCommentAPI(id);\n\n      setComments(result.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function handleAdd(newComment) {\n    try {\n      let result = await createTeamCommentAPI(id, newComment);\n      setComments([result.data, ...comments]);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function handleEdit(updatedComment) {\n    console.log(\"Handle Edit\", updatedComment);\n    try {\n      let result = await updateTeamCommentAPI(\n        id,\n        updatedComment.id,\n        updatedComment\n      );\n\n      const copyCommentArray = [...comments];\n\n      const indexUpdatedComment = copyCommentArray.findIndex((comment) => {\n        return comment.id === updatedComment.id;\n      });\n\n      copyCommentArray[indexUpdatedComment] = result.data;\n\n      setComments(copyCommentArray);\n\n      setViewEditToggleForm(!viewEditToggleForm);\n    } catch (error) {\n      alert(\"sorry, we cannot update, please contact support\");\n      console.log(error);\n    }\n  }\n\n  async function handleDelete(id) {\n    try {\n      await deleteTeamCommentAPI(id);\n\n      let filteredCommentArray = comments.filter((item) => item.id !== id);\n\n      setComments(filteredCommentArray);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <section className=\"container\">\n      <div className=\" comments-container\">\n        <h5 className=\"comment-heading\">Add a New Comment</h5>\n        <CommentForm fromParentCommentsHandleSubmit={handleAdd}></CommentForm>\n        <h5 className=\"comment-heading-comment\">Comments</h5>\n        {comments.length > 0 &&\n          comments.map((item) => {\n            return (\n              <CommentsContext.Provider\n                value={{\n                  fromParentCommentsHandleSubmit: handleEdit,\n                  comment: item,\n                  handleDelete: handleDelete,\n                  viewEditToggleForm: viewEditToggleForm,\n                  setViewEditToggleForm: setViewEditToggleForm,\n                }}\n                key={item.id}\n              >\n                <Comment />\n              </CommentsContext.Provider>\n            );\n          })}\n      </div>\n    </section>\n  );\n}\n\nexport default Comments;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}